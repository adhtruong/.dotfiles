#!/usr/bin/env bash
set -euo pipefail

# Always get FZF config from tmux environment (fail if not found)
eval "$(tmux show-environment -s FZF_CTRL_T_COMMAND)"
eval "$(tmux show-environment -s FZF_CTRL_T_OPTS)"

# Reuse FZF_CTRL_T configuration
selected=$(
	eval "$FZF_CTRL_T_COMMAND" | eval "fzf $FZF_CTRL_T_OPTS"
) || exit 0

[ -n "$selected" ] && tmux send-keys "$selected"
